### YamlMime:FAQ
metadata:
  title: Windows Autopilot troubleshooting FAQ
  description: Troubleshooting of common Windows Autopilot issues
  ms.service: windows-client
  ms.subservice: itpro-deploy
  ms.localizationpriority: medium
  author: frankroj
  ms.author: frankroj
  ms.reviewer: jubaptis
  manager: aaroncz
  ms.date: 07/24/2024
  ms.collection:
    - M365-modern-desktop
    - highpri
    - tier1
  ms.topic: faq
title: Windows Autopilot troubleshooting FAQ
summary: |
  **Applies to:**

  - Windows 11
  - Windows 10

  This article provides troubleshooting for common Windows Autopilot issues.

sections:
  - name: Windows Autopilot troubleshooting overview
    questions:

      - question: |
          What concepts should be understood when troubleshooting Windows Autopilot?
        answer: |
          Windows Autopilot is designed to simplify all parts of the Windows device lifecycle, but there are always situations where issues might arise. When troubleshooting an issue, it's helpful to understand:

            - The Windows Autopilot [process flow](#what-is-the-windows-autopilot-process-flow-).
            - How Windows Autopilot [device profiles](#how-are-windows-autopilot-device-profiles-downloaded-) are downloaded.
            - [Key activities](#what-are-the-key-activities-to-perform-when-troubleshooting-windows-autopilot-) to perform during troubleshooting.

      - question: |
          What is the Windows Autopilot process flow?
        answer: |
          Whether performing user-driven or self-deploying device deployments, the troubleshooting process is about the same. It's useful to understand the flow for a specific device:

          1. A network connection is established. The connection can be a wireless (Wi-fi) or wired (Ethernet) connection.

          1. The Windows Autopilot profile is downloaded. When a wired connection is used, or a wireless connection is established, the profile downloads from the Autopilot deployment service as soon as the network connection is in place.

          1. User authentication occurs. During a user-driven deployment, the user enters their Microsoft Entra credentials, which is then validated.

          1. Microsoft Entra join occurs. For user-driven deployments, the device is joined to Microsoft Entra ID using the specified user credentials. For self-deploying scenarios, the device is joined without specifying any user credentials.

          1. Automatic mobile device management (MDM) enrollment occurs. As part of the Microsoft Entra join process, the device enrolls in the MDM service configured in Microsoft Entra ID (for example, Microsoft Intune).

          1. Settings are applied. If the [enrollment status page](enrollment-status.md) is configured, most settings are applied while the enrollment status page is displayed. If not configured or available, settings will be applied after the user is signed in.

      - question: |
          How are Windows Autopilot device profiles downloaded?
        answer: |
          When an Internet-connected Windows device boots up, it attempts to connect to the Autopilot service and download an Autopilot profile. The Autopilot profile is downloaded as soon as possible, and again after each reboot.

          > [!NOTE]
          >
          > At this stage, it's important that a Windows Autopilot profile exists in the tenant so that a blank profile isn't cached locally on the device. If necessary, a new Windows Autopilot profile can be retrieved by rebooting the device.
          >
          > If a computer needs to be rebooted during OOBE to retrieve a new Autopilot profile:
          >
          > 1. Select Shift-F10 to open a command prompt window.
          >
          > 1. In the command prompt window, enter one of the following two commands:
          >
          >    - `shutdown.exe /r /t 0` to **restart** immediately.
          >
          >    - `shutdown.exe /s /t 0` to **shut down** immediately.
          >
          > For more information, see [Windows Setup Command-Line Options](/windows-hardware/manufacture/desktop/windows-setup-command-line-options).

      - question: |
          What are the key activities to perform when troubleshooting Windows Autopilot?
        answer: |
          The key activities to perform when troubleshooting are:

          - Review configuration: Has Microsoft Entra ID and Microsoft Intune or a non-Microsoft mobile device management (MDM) service been configured as specified in [Windows Autopilot configuration requirements](requirements.md?tabs=configuration)?

          - Check network connectivity: Can the device access the services described in [Windows Autopilot networking requirements](requirements.md?tabs=networking)?

          - Autopilot out-of-box experience (OOBE) behavior: Are the [expected OOBE](troubleshoot-oobe.md) screens displayed? Is the Microsoft Entra credentials page customized with organization-specific details as expected?

          - Microsoft Entra join issues: Is the device able to [join Microsoft Entra ID](#microsoft-entra-join-issues)?

          - MDM enrollment issues: Is the device able to [enroll in Microsoft Intune](troubleshoot-device-enrollment.md) or non-Microsoft MDM service?

          - Review logs that are automatically collected upon Autopilot failure. For more information, see [Collect diagnostics from a Windows device](/mem/intune/remote-actions/collect-diagnostics). # 1895390

  - name: Troubleshoot Windows Autopilot device import and enrollment
    questions:

      - question: |
          After the initial Windows Autopilot deployment, devices with a targeted Windows Autopilot self-deployment mode or pre-provisioning mode profile can't automatically re-enroll using Windows Autopilot. If a device is redeployed, then the `0x80180014` error code is returned.

          The Event Tracing for Windows (ETW) logs might show the following mobile device management (MDM) error:

          `MDM Enroll: Server Returned Fault/Code/Subcode/Value=(DeviceNotSupported) Fault/Reason/Text=(Enrollment blocked for AP device by SDM One Time Limit Check)`

          What is the cause of error code 0x80180014 and why can't the device re-enroll?

        answer: |
          Error code 0x80180014 can occur under either of the following scenarios:

          1. Microsoft Intune changed the Windows Autopilot self-deployment mode and pre-provisioning mode experience. To reuse a device, the device record created by Intune must be deleted.

              This change impacts all Autopilot deployments that use the self-deployment or pre-provisioning mode. This change impacts devices when they're reused, reset, or when redeploying a profile.

              To resolve the issue in this scenario and redeploy the device using Windows Autopilot:

              1. Delete the device record in Intune. For the specific steps, see [Delete devices from the Intune admin center](/mem/intune/remote-actions/devices-wipe#delete-devices-from-the-intune-admin-center).
              1. Redeploy the Autopilot deployment profile.

          1. Windows MDM enrollment is disabled in the Intune tenant.

              To resolve and fix the issue in this scenario, follow these steps:

              1. Sign into the [Microsoft Intune admin center](https://go.microsoft.com/fwlink/?linkid=2109431).

              1. In the **Home** screen, select **Devices** in the left hand pane.

              1. In the **Devices | Overview** screen, under **By platform**, select **Windows**.

              1. In the **Windows | Windows devices** screen, under **Device onboarding**, select **Enrollment**.

              1. In the **Windows | Enrollment** screen, under **Enrollment options**, select **Device platform restriction**.

              1. In the **Enrollment restrictions** screen, under **Device type restrictions**, select **All Users** under the **Name** column.

              1. In the **All Users** screen that opens, under **Manage**, select **Properties**.

              1. In the **Properties** screen that opens, next to **Platform settings**, select the **Edit** link.

              1. In the **Edit restriction** screen that opens:

                1. Locate **Windows (MDM)** under the **Type** column.

                1. Make sure that **Windows (MDM)** is set to **Allow** under the **Platform** column.

                1. If **Windows (MDM)** is set to **Block**, change it to **Allow**.

                1. Select **Review + save**, and then either **Save** if a setting was changed, or **Cancel** if not settings were changed.

              1. Repeat the above steps for any additional restrictions that might exist in the **Enrollment restrictions** screen other than **All Users**. Only restrictions for the **Windows** platform need to be verified.

              > [!NOTE]
              >
              > When multiple restrictions exist, restrictions might exist that only allow certain groups MDM enrollment. Some of the restrictions blocking MDM enrollment might be valid based on what group they're assigned to. When experiencing this problem, verify that the device isn't a member of one of the groups where there's MDM enrollment is blocked, or if applicable, change the MDM enrollment setting for that restriction to **Allow**.











  - name: Troubleshoot Microsoft Entra join issues
    questions:

      - question: |
          What is the most common issue joining a device to Microsoft Entra ID?
        answer: |
          The most common issue joining a device to Microsoft Entra ID is related to Microsoft Entra permissions. Make sure that the correct configuration is in place to allow users to join devices to Microsoft Entra ID. For more information, see [Configuration requirements](requirements.md?tabs=configuration).

      - question: |
          What happens if a user attempts to join more devices to Microsoft Entra ID than they are allowed?
        answer: |
          Errors can happen if a user exceeds the number of devices that they're allowed to join. This default limit is 50 devices but can be configured in Microsoft Entra ID. For more information, see [Understand Intune and Microsoft Entra device limit restrictions](/mem/intune/enrollment/device-limit-intune-azure).

      - question: |
          Why did deleting a device's object in Microsoft Entra ID cause the device to not be able to join Microsoft Entra ID any longer?
        answer: |
          A Microsoft Entra device is created upon import. It's important this object isn't deleted. The object acts as Windows Autopilot's anchor in Microsoft Entra ID for group membership and targeting, including the profile. Deleting it might lead to Microsoft Entra join errors. If this object is deleted, the issue can be fixed by deleting and reimporting the device as a Windows Autopilot device. Deleting and reimporting the device as a Windows Autopilot device will recreate the associated object in Microsoft Entra ID.

